package com.biz.iolist.service;

import java.io.BufferedReader;
import java.io.FileReader;
import java.io.PrintWriter;
import java.util.ArrayList;
import java.util.List;

public class MakeProductSerivceV1 {

	protected List<String> proNameList;
	protected List<String> productList;
	
	public MakeProductSerivceV1() {
		proNameList = new ArrayList<String>();
		productList = new ArrayList<String>();
	}
	
	/*
	 * 과자이름.txt 파일이름을 proFileName 변수로 받고
	 * proFileName 파일을 읽어서 과자이름 List를 추출하기
	 * 임의의 숫자를 발생시켜서 과자가격을 부착하여
	 * 과자정보를 생성
	 * 다른 곳에서 사용 할 수 있도록 return 수행
	 */
	public void getProductList(String proFileName, String proWriteFile) throws Exception {
		FileReader fileReader = new FileReader(proFileName);
		BufferedReader buffer = new BufferedReader(fileReader);
		
		String reader = new String();
		while(true) {
			reader = buffer.readLine();
			if(reader == null) break;
			
			if(reader.length() < 1) continue;
			
			proNameList.add(reader);
			
			for(String pro : proNameList) {
				int price = (int)(Math.random() * 1000 + 1000);
				
				String product = String.format("%s:%d", pro,price);
				productList.add(product);
			}
			
			PrintWriter fileOut = new PrintWriter (proWriteFile);
			for(String pro : productList) {
				fileOut.println(pro);
			}
			fileOut.close();
		}
		
		buffer.close();
		fileReader.close();
		
	}
}
